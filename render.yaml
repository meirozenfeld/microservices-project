services:
  # --------------------
  # API GATEWAY (PUBLIC)
  # --------------------
  - type: web
    name: api-gateway
    runtime: docker
    plan: free
    region: frankfurt
    dockerContext: ./backend/api-gateway
    dockerfilePath: backend/api-gateway/Dockerfile
    envVars:
      - fromGroup: prod-shared
    healthCheckPath: /health

  # --------------------
  # AUTH SERVICE
  # --------------------
  - type: web
    name: auth-service
    runtime: docker
    plan: free
    region: frankfurt
    dockerContext: ./backend/services/auth-service
    dockerfilePath: backend/services/auth-service/Dockerfile
    envVars:
      - fromGroup: prod-shared

  # --------------------
  # USER SERVICE
  # --------------------
  - type: web
    name: user-service
    runtime: docker
    plan: free
    region: frankfurt
    dockerContext: ./backend/services/user-service
    dockerfilePath: backend/services/user-service/Dockerfile
    envVars:
      - fromGroup: prod-shared

  # --------------------
  # TASK SERVICE
  # --------------------
  - type: web
    name: task-service
    runtime: docker
    plan: free
    region: frankfurt
    dockerContext: ./backend/services/task-service
    dockerfilePath: backend/services/task-service/Dockerfile
    envVars:
      - fromGroup: prod-shared

  # --------------------
  # ANALYTICS SERVICE
  # --------------------
  - type: web
    name: analytics-service
    runtime: docker
    plan: free
    region: frankfurt
    dockerContext: ./backend/services/analytics-service
    dockerfilePath: backend/services/analytics-service/Dockerfile
    envVars:
      - fromGroup: prod-shared

  # --------------------
  # NOTIFICATION SERVICE
  # --------------------
  - type: web
    name: notification-service
    runtime: docker
    plan: free
    region: frankfurt
    dockerContext: ./backend/services/notification-service
    dockerfilePath: backend/services/notification-service/Dockerfile
    envVars:
      - fromGroup: prod-shared
